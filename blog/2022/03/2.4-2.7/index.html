





<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM ‚Äî Uppy</title>
    <meta charset="utf-8">
    <meta name="title" content="Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM ‚Äî Uppy">
    <meta name="description" content="Recent Uppy updates brings image compression, improved Transloadit rate limiting and lighter Dashboard plugin. We‚Äôve also moved our end to end tests to Cypress, and are slowly converting plugins to ESM modules.
">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@uppy_io">
    <meta name="twitter:creator" content="@uppy_io">
    <meta property="og:url" content="https://uppy.io/blog/2022/03/2.4-2.7/index.html">
    <meta property="og:title" content="Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM ‚Äî Uppy">
    <meta name="twitter:title" content="Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM ‚Äî Uppy">
    <meta name="twitter:description" content="Recent Uppy updates brings image compression, improved Transloadit rate limiting and lighter Dashboard plugin. We‚Äôve also moved our end to end tests to Cypress, and are slowly converting plugins to ESM modules.
">
    <meta property="og:image" content="https://uppy.io/images/blog/2.4-2.7/compressor.jpg">
    <meta name="twitter:image" content="https://uppy.io/images/blog/2.4-2.7/compressor.jpg">

    <meta name="google-site-verification" content="JxARoHXoCI8bD07pLV_u3z6xpuWNcSIZIcHEytyCkUc" />

    <link rel="icon" href="/images/logos/uppy-dog-head-arrow.png" type="image/x-icon">
    <link rel="alternate" type="application/rss+xml" title="Uppy" href="/atom.xml">

    <script>
      window.PAGE_TYPE = ""
    </script>
    
<link rel="stylesheet" href="/css/main.css?version=2">

    <!-- ^ poor man's solution to css cache busting. bump the version when there's something new we really want users to see -->
  <meta name="generator" content="Hexo 4.2.1"></head>
  <body class="page-inner ">
    <div class="page">
      <div class="TransloaditBar js-TransloaditBar">
        <div class="TransloaditBar-about">
          <!-- <a class="TransloaditBar-logo" href="https://transloadit.com/" target="_blank" rel="noopener">
            <img class="TransloaditBar-logoImg" src="/images/transloadit-white-glyph.svg" width="20" height="20" alt="Transloadit">
          </a> -->
          <!-- <span>Uppy is an open source project by <a class="TransloaditBar-link" href="https://transloadit.com/" target="_blank">Transloadit</a></span> -->
          <img width="24" height="16" src="/images/ua-flag.svg" alt="Flag of Ukraine">
          &nbsp;
          We stand with the brave people of Ukraine. Stop the war. Find out&nbsp;<a class="TransloaditBar-link" href="https://transloadit.com/blog/2022/02/ukraine" target="_blank" rel="noopener">how you can help.</a>
        </div>
      </div>

      <header id="header" class="MainHeader js-MainHeader">
        <button class="MainHeader-menuBtn js-MenuBtn"></button>

        <span id="logo" class="MainLogo">
          <a class="MainLogo-link" href="/">Uppy</a>
          <!-- Was used for 1.0, we can re-use for 2.0 or major announcements -->
          <!-- <a class="MainLogo-announcement" href="/blog/2019/04/1.0/">
            1.0
            <span class="MainLogo-emoji">
              <img src="/images/party-popper.png" srcset="/images/party-popper@2x.png 2x" alt="üéâ">
            </span>
          </a> -->
        </span>

        <nav>
          <ul id="nav" class="MainMenu">
            <!-- @todo uncomment search input when we get our own swifttype -->
<!-- <li>
  <form id="search-form" class="MainMenu-search">
    <input type="text" id="search-query" class="MainMenu-searchQuery st-default-search-input">
  </form>
</li> -->
<!--li><a href="/guide/" class="nav-link">Guide</a></li-->
<li><a href="/docs/" class="nav-link">Docs</a></li>
<li><a href="/examples/dashboard/" class="nav-link">Examples</a></li>
<!--li><a href="/stats/" class="nav-link">Stats</a></li-->
<li><a href="/blog/" class="nav-link current">Blog</a></li>
<li><a href="/support/" class="nav-link">Support</a></li>
<li><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener" class="nav-link">GitHub</a></li>

          </ul>
        </nav>

        <div class="MainHeader-tagline">
          The file uploader that <span class="MainHeader-taglinePart js-MainHeader-taglinePart is-visible">loves to play fetch</span>
        </div>

        <ul class="MainHeader-taglineList js-MainHeader-taglineList">
          
          <li>won‚Äôt chew on your shoes</li>
          
          <li>is fully housebroken</li>
          
          <li>just wants to play with you</li>
          
          <li>doesn‚Äôt hump your leg</li>
          
          <li>also accepts cat pictures</li>
          
          <li>loves you unconditionally</li>
          
          <li>you don‚Äôt have to keep on a leash</li>
          
          <li>won‚Äôt pee on your rug</li>
          
          <li>loves to play fetch</li>
          
          <li>doesn‚Äôt bite (hard)</li>
          
          <li>won‚Äôt bark at the mailman</li>
          
          <li>is great with the kids</li>
          
          <li>can digest anything, even chocolate cake</li>
          
          <li>is always happy to see you</li>
          
          <li>isn‚Äôt afraid of fireworks</li>
          
          <li>is allowed everywhere</li>
          
        </ul>
      </header>

      <main class="MainContent js-MainContent" id="main">
        
          <div class="Sidebar js-Sidebar is-blog">
    <ul class="main-menu">
        <!-- @todo uncomment search input when we get our own swifttype -->
<!-- <li>
  <form id="search-form" class="MainMenu-search">
    <input type="text" id="search-query" class="MainMenu-searchQuery st-default-search-input">
  </form>
</li> -->
<!--li><a href="/guide/" class="nav-link">Guide</a></li-->
<li><a href="/docs/" class="nav-link">Docs</a></li>
<li><a href="/examples/dashboard/" class="nav-link">Examples</a></li>
<!--li><a href="/stats/" class="nav-link">Stats</a></li-->
<li><a href="/blog/" class="nav-link current">Blog</a></li>
<li><a href="/support/" class="nav-link">Support</a></li>
<li><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener" class="nav-link">GitHub</a></li>

    </ul>
    <div class="list">
        <h2>
            Recent Posts
            <a href="/atom.xml" rel="noreferrer noopener" target="_blank" style="vertical-align: middle; margin-left: 5px">
                <img src="/images/feed.png" style="width:15px;height:15px">
            </a>
        </h2>

        <ul>
  
  <li>
    <a href="/blog/2022/03/2.4-2.7/" class="sidebar-link current">Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM</a>
  </li>
  
  <li>
    <a href="/blog/2021/12/2.1-2.3/" class="sidebar-link">üéÑ Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more</a>
  </li>
  
  <li>
    <a href="/blog/2021/08/2.0/" class="sidebar-link">Uppy 2.0.0: smaller, faster, modular plugins, Preact X, stricter types, and much more</a>
  </li>
  
  <li>
    <a href="/blog/2021/07/1.30/" class="sidebar-link">Uppy 1.30: Angular integration, granular image rotation, Google Drive shortcuts</a>
  </li>
  
  <li>
    <a href="/blog/2021/05/1.29/" class="sidebar-link">Uppy 1.29: Golden Retriever, disableLocalFiles, Webcam previews, uppy.logout</a>
  </li>
  
  <li>
    <a href="/blog/2021/04/1.27/" class="sidebar-link">Uppy 1.27: Drop Target plugin, Vue 3 support, Dashboard dynamic meta fields, ‚ÄúShared with me‚Äù in Google Drive</a>
  </li>
  
  <li>
    <a href="/blog/2021/02/1.26/" class="sidebar-link">Uppy 1.26: Dashboard ‚Äúdisabled‚Äù, per-file headers</a>
  </li>
  
  <li>
    <a href="/blog/2021/01/1.25/" class="sidebar-link">Uppy 1.25: right-to-left scripts, Ukrainian translation, Companion improvements</a>
  </li>
  
  <li>
    <a href="/blog/2020/12/1.24/" class="sidebar-link">Uppy 1.24: üéÖ Happy Holidays ‚Äî Svelte, React hook, Auto Open Image Editor</a>
  </li>
  
  <li>
    <a href="/blog/2020/11/1.23/" class="sidebar-link">Uppy 1.23: Vue.js, Box, Done button and cloud file restrictions</a>
  </li>
  
  <li>
    <a href="/blog/2020/10/1.22/" class="sidebar-link">üéÉ Uppy 1.22: Webcam camera source, Unsplash and maxTotalFileSize</a>
  </li>
  
</ul>
        <ul class="Social">
  <li><a href="https://twitter.com/uppy_io" target="_blank" rel="noopener" class="twitter-follow-button" data-show-count="false" data-dnt="true">Follow @uppy_io</a></li>
  <li><iframe src="https://ghbtns.com/github-btn.html?user=transloadit&repo=uppy&type=watch&count=true"
allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe></li>
  <!-- to regenerate you can use this link: https://img.shields.io/badge/community-forum-d8006a.svg -->
  <li><a href="https://community.transloadit.com/c/uppy" target="_blank" rel="noopener"><img src="/images/community-forum-d8006a.svg" /> </a></li>
  <li class="BuildBadge">
   <span class="wrapper">
     <a href="https://github.com/transloadit/uppy/actions" target="_blank" rel="noopener"><img src="https://github.com/transloadit/uppy/workflows/End-to-end%20tests/badge.svg" alt="Build Status"></a>
   </span>
  </li>
</ul>

    </div>
</div>


<div class="Content js-Content with-sidebar">
    
  <h1>Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM</h1>
  <div class="post-date">Friday Mar 11, 2022</div>
    
    <html><head></head><body><p>Recent Uppy updates brings image compression, improved Transloadit rate limiting and lighter Dashboard plugin. We‚Äôve also moved our end to end tests to Cypress, and are slowly converting plugins to ESM modules.</p>
<img class="border" alt="Uppy Compressor plugin showing compressed images notification" src="/images/blog/2.4-2.7/compressor.jpg">

<a id="more"></a>

<h2 id="Compressor"><a href="#Compressor" class="headerlink" title="Compressor"></a>Compressor</h2><p>Some of the most commonly uploaded files on the internet are images ‚Äî photos, stock images, screenshots, documents scans. Uppy now includes a new plugin, <code>@uppy/compressor</code> that optimizes images (JPEG, PNG), saving on average up to 60% in size (roughly 18 MB for 10 images). It uses <a href="https://github.com/fengyuanchen/compressorjs" target="_blank" rel="noopener">Compressor.js</a> under the hood.</p>
<p><a href="https://uppy.io/docs/compressor/">Read the docs</a> and <a href="https://uppy.io/examples/dashboard/">try Compressor in action</a>.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Uppy</span></span> <span class="token keyword module">from</span> <span class="token string">'@uppy/core'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">Compressor</span></span> <span class="token keyword module">from</span> <span class="token string">'@uppy/compressor'</span>

<span class="token keyword">const</span> uppy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uppy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
uppy<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token maybe-class-name">Compressor</span><span class="token punctuation">)</span></pre></td></tr></table></figure>
<p><code>@uppy/compressor</code> is also the first plugin that we are releasing as ESM, backwards compatible as CJS, to test out how this works. Please report any issues.</p>
<h2 id="Hosted-Companion-Custom-Credentials"><a href="#Hosted-Companion-Custom-Credentials" class="headerlink" title="Hosted Companion Custom Credentials"></a>Hosted Companion Custom Credentials</h2><p>It‚Äôs no secret <a href="https://transloadit.com/docs/sdks/uppy/" target="_blank" rel="noopener">Transloadit hosted Companion</a> is the easiest secure way to allow your users pick files from cloud sources like Google Drive, Instagram, Box, etc via Uppy. Up until now, however, that meant your users had to authenticate their cloud account with Transloadit, while you might want to show your own logo instead. That‚Äôs now possible: head to <code>Transloadit Console</code> / <code>Credentials</code>, scroll to <code>Third-party Credentials</code>, click on <code>Add new Credentials</code>, select <code>Companion OAuth</code>, and voil√†!</p>
<img class="border" alt="Transloadit Companion 3rd party credentials" src="/images/blog/2.4-2.7/companion-3rd-party-oauth.jpg">

<p>Try it out with <a href="https://transloadit.com/pricing/" target="_blank" rel="noopener">Free Transloadit Community plan ‚Äî 5GB / month and Companion</a>.</p>
<h2 id="Transloadit-Rate-Limiting"><a href="#Transloadit-Rate-Limiting" class="headerlink" title="Transloadit Rate Limiting"></a>Transloadit Rate Limiting</h2><p>We‚Äôve added rate limiting to Transloadit <a href="https://github.com/transloadit/uppy/pull/3429" target="_blank" rel="noopener">assembly creation and status polling</a> and <a href="https://github.com/transloadit/uppy/pull/3394" target="_blank" rel="noopener">tus retries</a>:</p>
<blockquote>
<p>When the remote server responds with HTTP 429, all requests are paused for a while in the hope that it can resolve the rate limiting. Failed requests are also now queued up after the retry delay. Before that, they were scheduled for retry without being queued up, which would sometimes end up overflowing the limit option.</p>
</blockquote>
<p>Now uploading many files at once is even more robust.</p>
<h2 id="Move-to-ESM"><a href="#Move-to-ESM" class="headerlink" title="Move to ESM"></a>Move to ESM</h2><p>The JavaScript ecosystem is moving towards ESM, and we want to follow suit. We are slowly starting to adopt ESM in Uppy packages, and to do that we integrated into our build system a plugin that transpiles ESM source code to CommonJS syntax which is distributed with the npm package. Nothing changes from your side, we know that not everyone is using tooling that support ESM, so we‚Äôre holding on to CommonJS for the time being. Our plan is to refactor all official Uppy plugins to ESM before Uppy 3.0 is released, and drop CommonJS in favor of ESM in the npm packages then.</p>
<p>For details, see <a href="https://github.com/transloadit/uppy/pull/3468" target="_blank" rel="noopener">PR 3468</a>.</p>
<h2 id="End-to-End-Move-to-Cypress"><a href="#End-to-End-Move-to-Cypress" class="headerlink" title="End to End: Move to Cypress"></a>End to End: Move to Cypress</h2><p>We‚Äôve had end to end from the start in Uppy, but the developer experience was less than ideal with custom Webdriver.io + Selenium. The transition to <a href="https://github.com/transloadit/uppy/pull/3444" target="_blank" rel="noopener">Cypress</a> allows us to write tests with ease and comfort, backed by great documentation.</p>
<h2 id="Lighter-Bundle"><a href="#Lighter-Bundle" class="headerlink" title="Lighter Bundle"></a>Lighter Bundle</h2><p>We continue to look for ways to reduce Uppy bundle size and modernize our build toolchain. This time, we‚Äôve replaced <a href="https://github.com/exif-js/exif-js" target="_blank" rel="noopener">Exifr.js</a> legacy bundle with the modern one without IE polyfills. Our Browserify bundler has been replaced with a modern and more efficient ESBuild.</p>
<h2 id="Companion-Improvements"><a href="#Companion-Improvements" class="headerlink" title="Companion Improvements"></a>Companion Improvements</h2><ul>
<li>Improved private ip check (#3403)</li>
<li>Implement periodic ping functionality (#3246)</li>
<li>Fix broken thumbnails for box and dropbox (#3460)</li>
<li>Fix unpslash author meta, sanitize metadata to strings and improve companion tests (#3478)</li>
</ul>
<p>That‚Äôs it for today! See full <a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1300" target="_blank" rel="noopener">changelog</a> for more details.</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>

    <center>
        <br />
        <a class="github-button" href="https://github.com/transloadit/uppy" data-icon="octicon-star" data-size="large"
        data-show-count="true" aria-label="Star transloadit/uppy on GitHub">Star</a>
    </center>

    <div class="PostAuthors">
        
            <div class="PostAuthor">
                <a class="PostAuthor-link" href="https://transloadit.com/about/#aduh95" target="_blank" rel="noopener">
                    <img class="PostAuthor-img" src="https://www.gravatar.com/avatar/1ef7117c7b7a0caa172d567665dc8524?s=200">
                    <h4 class="PostAuthor-name">Antoine du Hamel</h4>
                    <div class="PostAuthor-tagline">Developer</div>
                </a>
            </div>
        
            <div class="PostAuthor">
                <a class="PostAuthor-link" href="https://transloadit.com/about/#artur" target="_blank" rel="noopener">
                    <img class="PostAuthor-img" src="https://www.gravatar.com/avatar/6ddfaa9427d64ba52bbe021ea5e2ffef?s=200">
                    <h4 class="PostAuthor-name">Artur Paikin</h4>
                    <div class="PostAuthor-tagline">Developer</div>
                </a>
            </div>
        
            <div class="PostAuthor">
                <a class="PostAuthor-link" href="https://transloadit.com/about/#mikael" target="_blank" rel="noopener">
                    <img class="PostAuthor-img" src="https://www.gravatar.com/avatar/b32426186bf182de99cfa12adbd22761?s=200">
                    <h4 class="PostAuthor-name">Mikael Finstad</h4>
                    <div class="PostAuthor-tagline">Developer</div>
                </a>
            </div>
        
            <div class="PostAuthor">
                <a class="PostAuthor-link" href="https://transloadit.com/about/#merlijn" target="_blank" rel="noopener">
                    <img class="PostAuthor-img" src="https://www.gravatar.com/avatar/26363b11ef0d2c8070c3e4aa628e84c4?s=200">
                    <h4 class="PostAuthor-name">Merlijn Vos</h4>
                    <div class="PostAuthor-tagline">Developer</div>
                </a>
            </div>
        
    </div>
  <br />
    <!-- <ul class="Social">
        <li><iframe src="https://ghbtns.com/github-btn.html?user=transloadit&repo=uppy&type=watch&count=true"
                allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe></li>
    </ul> -->
  <!-- <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = 'https://uppy.io/blog/2022/03/2.4-2.7/';  // Replace PAGE_URL with your page's canonical URL variable
// this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://uppy.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
                             -->
</div>

        
      </main>

      <script defer data-domain="uppy.io" src="https://analytics.transloadit.com/js/plausible.js"></script>


      
        <script src="/js/smooth-scroll.min.js"></script>
        <!-- Place this tag in your head or just before your close body tag. -->
        <script async defer src="https://buttons.github.io/buttons.js"></script>
      
      <script src="/js/common.js"></script>

      <!-- Twitter follow button script -->
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>
  </body>
</html>
